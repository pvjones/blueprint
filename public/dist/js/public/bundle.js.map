{"version":3,"sources":["app.js","controllers/home.controller.js","controllers/menu.controller.js","controllers/start.controller.js","controllers/summary.controller.js","directives/upload.directive.js","services/auth.service.js","services/results.service.js","services/upload.service.js"],"names":["angular","module","config","$inject","$stateProvider","$urlRouterProvider","state","url","controller","templateUrl","resolve","user","AuthService","$state","getUser","then","response","currentUser","userId","userid","userName","username","isAuthed","catch","error","go","otherwise","HomeController","$scope","console","log","$","window","on","winScroll","scrollTop","css","MenuController","loggedIn","res","err","scroll","sticky","addClass","removeClass","StartController","UploadService","uploadGenomeTXT","TXT","showUpload","sendGenomeTXT","SummaryController","ResultsService","getGenomeResults","getResultsByUserId","cleanseGenotypeResults","directive","onReadFile","$parse","restrict","scope","link","element","attrs","fn","onChangeEvent","reader","FileReader","onload","onLoadEvent","$apply","$fileContent","target","result","readAsText","srcElement","files","service","$http","method","data","Error","genotypeResultsObject","$q","uploadTXT","deferred","defer","file","reject","promise"],"mappings":";;AAAA,CAAC,YAAW;;AAEV;;AAEAA,UACGC,MADH,CACU,KADV,EACiB,CAAC,WAAD,CADjB,EAEGC,MAFH,CAEUA,MAFV;;AAIAA,SAAOC,OAAP,GAAiB,CAAC,gBAAD,EAAmB,oBAAnB,CAAjB;;AAEA,WAASD,MAAT,CAAgBE,cAAhB,EAAgCC,kBAAhC,EAAoD;;AAElDD,mBACGE,KADH,CACS,MADT,EACiB;AACbC,WAAK,OADQ;AAEbC,kBAAY,gBAFC;AAGbC,mBAAa,sBAHA;AAIbC,eAAS;AACPC,cAAM,cAACC,WAAD,EAAcC,MAAd,EAAyB;;AAE7B,iBAAOD,YAAYE,OAAZ,GACFC,IADE,CACG,UAACC,QAAD,EAAc;AAClB,gBAAIC,cAAc;AAChBC,sBAAQF,SAASG,MADD;AAEhBC,wBAAUJ,SAASK,QAFH;AAGhBC,wBAAU;AAHM,aAAlB;AAKA,mBAAOL,WAAP;AACD,WARE,EASFM,KATE,CASI,UAACC,KAAD,EAAW;AAChB,gBAAIP,cAAc;AAChBK,wBAAU;AADM,aAAlB;AAGA,mBAAOL,WAAP;AACD,WAdE,CAAP;AAeD;AAlBM;AAJI,KADjB,EA0BGX,KA1BH,CA0BS,OA1BT,EA0BkB;AACdC,WAAK,QADS;AAEdC,kBAAY,iBAFE;AAGdC,mBAAa,uBAHC;AAIdC,eAAS;AACPC,cAAM,cAACC,WAAD,EAAcC,MAAd,EAAyB;;AAE7B,iBAAOD,YAAYE,OAAZ,GACFC,IADE,CACG,UAACC,QAAD,EAAc;AAClB,gBAAIC,cAAc;AAChBC,sBAAQF,SAASG,MADD;AAEhBC,wBAAUJ,SAASK,QAFH;AAGhBC,wBAAU;AAHM,aAAlB;AAKA,mBAAOL,WAAP;AACD,WARE,EASFM,KATE,CASI,UAACC,KAAD,EAAW;AAChB,gBAAIP,cAAc;AAChBK,wBAAU;AADM,aAAlB;AAGAT,mBAAOY,EAAP,CAAU,MAAV;AACA,mBAAOR,WAAP;AACD,WAfE,CAAP;AAgBD;AAnBM;AAJK,KA1BlB,EAoDGX,KApDH,CAoDS,SApDT,EAoDoB;AAChBC,WAAK,UADW;AAEhBC,kBAAY,mBAFI;AAGhBC,mBAAa,yBAHG;AAIhBC,eAAS;AACPC,cAAM,cAACC,WAAD,EAAcC,MAAd,EAAyB;;AAE7B,iBAAOD,YAAYE,OAAZ,GACFC,IADE,CACG,UAACC,QAAD,EAAc;AAClB,gBAAIC,cAAc;AAChBC,sBAAQF,SAASG,MADD;AAEhBC,wBAAUJ,SAASK,QAFH;AAGhBC,wBAAU;AAHM,aAAlB;AAKA,mBAAOL,WAAP;AACD,WARE,EASFM,KATE,CASI,UAACC,KAAD,EAAW;AAChB,gBAAIP,cAAc;AAChBK,wBAAU;AADM,aAAlB;AAGAT,mBAAOY,EAAP,CAAU,MAAV;AACA,mBAAOR,WAAP;AACD,WAfE,CAAP;AAgBD;AAnBM;AAJO,KApDpB;;AA+EAZ,uBAAmBqB,SAAnB,CAA6B,OAA7B;AACD;AAEF,CA9FD;;;ACAA,CAAC,YAAW;AACV1B,UACGC,MADH,CACU,KADV,EAEGO,UAFH,CAEc,gBAFd,EAEgCmB,cAFhC;;AAIA,WAASA,cAAT,CAAwBC,MAAxB,EAAgCjB,IAAhC,EAAsC;;AAEpC;AACAkB,YAAQC,GAAR,CAAY,sBAAZ,EAAoCnB,IAApC;AACAiB,WAAOR,QAAP,GAAkBT,KAAKS,QAAvB;AACAQ,WAAON,QAAP,GAAkBX,KAAKW,QAAvB;;AAEA;AACAS,MAAEC,MAAF,EAAUC,EAAV,CAAa,QAAb,EAAuB,YAAW;AAChC,UAAIC,YAAYH,EAAE,IAAF,EAAQI,SAAR,EAAhB;;AAEAJ,QAAE,QAAF,EAAYK,GAAZ,CAAgB;AACd,qBAAa,iBAAiBF,YAAY,EAA7B,GAAkC;AADjC,OAAhB;AAGAH,QAAE,cAAF,EAAkBK,GAAlB,CAAsB;AACpB,qBAAa,gBAAgBF,YAAY,CAA5B,GAAgC,MAAhC,GAAyCA,YAAY,EAArD,GAA0D;AADnD,OAAtB;AAGAH,QAAE,eAAF,EAAmBK,GAAnB,CAAuB;AACrB,qBAAa,iBAAiBF,YAAY,EAA7B,GAAkC;AAD1B,OAAvB;AAGAH,QAAE,UAAF,EAAcK,GAAd,CAAkB;AAChB,qBAAa,iBAAiBF,YAAY,EAA7B,GAAkC;AAD/B,OAAlB;AAGAH,QAAE,WAAF,EAAeK,GAAf,CAAmB;AACjB,qBAAa,iBAAiBF,YAAY,EAA7B,GAAkC;AAD9B,OAAnB;AAGD,KAlBD;AAoBD,GAjCS,CAiCR;AACH,CAlCD,KAkCM;;;AClCN,CAAC,YAAW;;AAEVlC,UACGC,MADH,CACU,KADV,EAEGO,UAFH,CAEc,gBAFd,EAEgC6B,cAFhC;;AAIA,WAASA,cAAT,CAAwBT,MAAxB,EAAgCf,MAAhC,EAAwCD,WAAxC,EAAqD;;AAEnD;AACAgB,WAAOU,QAAP,GAAmBV,OAAOU,QAAP,KAAoB,IAArB,GAA6B,IAA7B,GAAoC,KAAtD;;AAEA,aAASxB,OAAT,GAAmB;;AAEjBF,kBAAYE,OAAZ,GACGC,IADH,CACQ,UAACwB,GAAD,EAAS;AACXX,eAAOR,QAAP,GAAkBmB,IAAIlB,QAAtB;AACAO,eAAON,QAAP,GAAkB,IAAlB;AACD,OAJL,EAKKC,KALL,CAKW,UAACiB,GAAD,EAAS;AACdZ,eAAON,QAAP,GAAkB,KAAlB;AACD,OAPL;AAQD;;AAEDR;;AAEAiB,MAAEC,MAAF,EAAUS,MAAV,CAAiB,YAAW;AAC1B,UAAIC,SAASX,EAAE,SAAF,CAAb;AAAA,UACEU,SAASV,EAAEC,MAAF,EAAUG,SAAV,EADX;AAEA,UAAIM,UAAU,EAAd,EAAkBC,OAAOC,QAAP,CAAgB,OAAhB,EAAlB,KACKD,OAAOE,WAAP,CAAmB,OAAnB;AACN,KALD;AAOD,GAhCS,CAgCR;AACH,CAjCD,KAiCM;;;ACjCN,CAAC,YAAW;;AAEV5C,UACGC,MADH,CACU,KADV,EAEGO,UAFH,CAEc,iBAFd,EAEiCqC,eAFjC;;AAIA,WAASA,eAAT,CAAyBjB,MAAzB,EAAiCf,MAAjC,EAAyCiC,aAAzC,EAAwDnC,IAAxD,EAA8D;;AAE5DiB,WAAOP,QAAP,GAAkBV,KAAKS,QAAvB;;AAEAQ,WAAOmB,eAAP,GAAyB,UAASC,GAAT,EAAc;AACnCpB,aAAOqB,UAAP,GAAoB,IAApB;AACA,UAAID,GAAJ,EAAS;;AAEPF,sBAAcI,aAAd,CAA4BF,GAA5B,EAAiCjC,IAAjC,CAAsC,UAACC,QAAD,EAAc;AAClDa,kBAAQC,GAAR,CAAYd,QAAZ;AACAH,iBAAOY,EAAP,CAAU,SAAV;AACD,SAHD,EAGG,UAACe,GAAD;AAAA,iBAASX,QAAQC,GAAR,CAAYU,GAAZ,CAAT;AAAA,SAHH;AAID;AACF,KATH;AAWD,GArBS,CAqBR;AAEH,CAvBD,KAuBM;;;ACvBN,CAAC,YAAY;AACXxC,UACEC,MADF,CACS,KADT,EAEEO,UAFF,CAEa,mBAFb,EAEkC2C,iBAFlC;;AAIA,WAASA,iBAAT,CAA2BvB,MAA3B,EAAmCf,MAAnC,EAA2CF,IAA3C,EAAiDyC,cAAjD,EAAiE;;AAE/DxB,WAAOR,QAAP,GAAkBT,KAAKS,QAAvB;AACAQ,WAAOV,MAAP,GAAgBP,KAAKO,MAArB;;AAEA,QAAImC,mBAAmB,SAAnBA,gBAAmB,CAACnC,MAAD,EAAY;AACjCW,cAAQC,GAAR,CAAY,OAAZ;AACAsB,qBAAeE,kBAAf,CAAkCpC,MAAlC,EACGH,IADH,CACQ,UAACC,QAAD,EAAc;AAClBa,gBAAQC,GAAR,CAAYd,QAAZ;AACA,eAAOoC,eAAeG,sBAAf,CAAsCvC,QAAtC,CAAP;AACD,OAJH,EAKGD,IALH,CAKQ,UAACC,QAAD,EAAc;AAClBa,gBAAQC,GAAR,CAAYd,QAAZ;AACA,eAAOA,QAAP,CAFkB,CAEH;AAChB,OARH,EASGO,KATH,CASS,UAACiB,GAAD;AAAA,eAASX,QAAQC,GAAR,CAAYU,GAAZ,CAAT;AAAA,OATT;AAUD,KAZD;;AAcAa,qBAAiBzB,OAAOV,MAAxB,EACGH,IADH,CACQ,UAACC,QAAD,EAAc;AAClBa,cAAQC,GAAR,CAAYd,QAAZ;AACD,KAHH,EAIGO,KAJH,CAIS,UAACiB,GAAD,EAAS;AACdX,cAAQC,GAAR,CAAYU,GAAZ;AACD,KANH;AAQD,GAhCU,CAgCT;AACH,CAjCD,KAiCM;;;ACjCN,CAAC,YAAW;AACV;;AAEAxC,UACGC,MADH,CACU,KADV,EAEGuD,SAFH,CAEa,YAFb,EAE2BC,UAF3B;;AAKA,WAASA,UAAT,CAAoBC,MAApB,EAA4B;;AAE1B,WAAO;AACLC,gBAAU,GADL;AAELC,aAAO,KAFF;AAGLC,YAAM,cAASD,KAAT,EAAgBE,OAAhB,EAAyBC,KAAzB,EAAgC;AACpC,YAAIC,KAAKN,OAAOK,MAAMN,UAAb,CAAT;AACAK,gBAAQ7B,EAAR,CAAW,QAAX,EAAqB,UAASgC,aAAT,EAAwB;AAC3C,cAAIC,SAAS,IAAIC,UAAJ,EAAb;AACAD,iBAAOE,MAAP,GAAgB,UAASC,WAAT,EAAsB;AACpCT,kBAAMU,MAAN,CAAa,YAAW;AACtBN,iBAAGJ,KAAH,EAAU;AACRW,8BAAcF,YAAYG,MAAZ,CAAmBC;AADzB,eAAV;AAGD,aAJD;AAKD,WAND;AAOAP,iBAAOQ,UAAP,CAAkB,CAACT,cAAcU,UAAd,IAA4BV,cAAcO,MAA3C,EAAmDI,KAAnD,CAAyD,CAAzD,CAAlB;AACD,SAVD;AAWD;AAhBI,KAAP;AAmBD;AACF,CA9BD;;;ACAA,CAAC,YAAW;AACV5E,UACGC,MADH,CACU,KADV,EAEG4E,OAFH,CAEW,aAFX,EAE0BjE,WAF1B;;AAIA,WAASA,WAAT,CAAqBkE,KAArB,EAA4B;;AAE5B,SAAKhE,OAAL,GAAe,YAAM;AACjB,aAAOgE,MAAM;AACTC,gBAAQ,KADC;AAETxE,aAAK;AAFI,OAAN,EAIJQ,IAJI,CAIC,UAACC,QAAD,EAAc;AAClB,eAAOA,SAASgE,IAAT,CAAc,CAAd,CAAP;AACD,OANI,EAOJzD,KAPI,CAOE,UAACiB,GAAD,EAAS;AACd,cAAM,IAAIyC,KAAJ,CAAUzC,GAAV,CAAN;AACD,OATI,CAAP;AAUD,KAXH;AAaC;AAEF,CAtBD;;;ACAA,CAAC,YAAW;AACVxC,UACGC,MADH,CACU,KADV,EAEG4E,OAFH,CAEW,gBAFX,EAE6BzB,cAF7B;;AAIA,WAASA,cAAT,CAAwB0B,KAAxB,EAA+B;;AAE7B,SAAKxB,kBAAL,GAA0B,UAACpC,MAAD,EAAY;AACpCW,cAAQC,GAAR,CAAY,gBAAZ,EAA8BZ,MAA9B;AACA,aAAO4D,MAAM;AACXC,gBAAQ,KADG;AAEXxE,+BAAqBW;AAFV,OAAN,EAINH,IAJM,CAID,UAACC,QAAD,EAAc;AAClBa,gBAAQC,GAAR,CAAYd,QAAZ;AACA,eAAOA,SAASgE,IAAhB;AACD,OAPM,EAQNzD,KARM,CAQA,UAACiB,GAAD,EAAS;AACdX,gBAAQC,GAAR,CAAYU,GAAZ;AACA,cAAM,IAAIyC,KAAJ,CAAUzC,GAAV,CAAN;AACD,OAXM,CAAP;AAYD,KAdD;;AAgBA,SAAKe,sBAAL,GAA8B,UAAC2B,qBAAD,EAA2B;AACvD,aAAOA,qBAAP,CADuD,CAC1B;AAC9B,KAFD;AAID,IA3BS,CA2BP;AACJ,CA5BD,KA4BM;;;AC5BN,CAAC,YAAW;AACVlF,UACGC,MADH,CACU,KADV,EAEG4E,OAFH,CAEW,eAFX,EAE4B/B,aAF5B;;AAIA,WAASA,aAAT,CAAuBgC,KAAvB,EAA8BK,EAA9B,EAAkC;;AAEhC,SAAKjC,aAAL,GAAqB,UAACkC,SAAD,EAAe;AAClC,UAAIC,WAAWF,GAAGG,KAAH,EAAf;AACAR,YAAM;AACAC,gBAAQ,MADR;AAEAxE,aAAK,aAFL;AAGAyE,cAAM,EAACO,MAAMH,SAAP;AAHN,OAAN,EAIGrE,IAJH,CAIQ,UAASwB,GAAT,EAAc;AACpB8C,iBAAS3E,OAAT,CAAiB6B,IAAIyC,IAArB;AACD,OAND,EAMGzD,KANH,CAMS,UAASgB,GAAT,EAAc;AACrB8C,iBAASG,MAAT,CAAgBjD,GAAhB;AACD,OARD;AASA,aAAO8C,SAASI,OAAhB;AACD,KAZD;AAcD,GArBS,CAqBR;AAEH,CAvBD,KAuBM","file":"../bundle.js","sourcesContent":["(function() {\n\n  'use strict';\n\n  angular\n    .module('app', ['ui.router'])\n    .config(config);\n\n  config.$inject = ['$stateProvider', '$urlRouterProvider'];\n\n  function config($stateProvider, $urlRouterProvider) {\n\n    $stateProvider\n      .state('home', {\n        url: '/home',\n        controller: 'HomeController',\n        templateUrl: './../views/home.html',\n        resolve: {\n          user: (AuthService, $state) => {\n\n            return AuthService.getUser()\n                .then((response) => {\n                  let currentUser = {\n                    userId: response.userid,\n                    userName: response.username,\n                    isAuthed: true\n                  }\n                  return currentUser\n                })\n                .catch((error) => {\n                  let currentUser = {\n                    isAuthed: false\n                  }\n                  return currentUser\n                });\n          }\n        }\n      })\n      .state('start', {\n        url: '/start',\n        controller: 'StartController',\n        templateUrl: './../views/start.html',\n        resolve: {\n          user: (AuthService, $state) => {\n\n            return AuthService.getUser()\n                .then((response) => {\n                  let currentUser = {\n                    userId: response.userid,\n                    userName: response.username,\n                    isAuthed: true\n                  }\n                  return currentUser\n                })\n                .catch((error) => {\n                  let currentUser = {\n                    isAuthed: false\n                  }\n                  $state.go('home')\n                  return currentUser\n                });\n          }\n        }\n      })\n      .state('summary', {\n        url: '/summary',\n        controller: 'SummaryController',\n        templateUrl: './../views/summary.html',\n        resolve: {\n          user: (AuthService, $state) => {\n\n            return AuthService.getUser()\n                .then((response) => {\n                  let currentUser = {\n                    userId: response.userid,\n                    userName: response.username,\n                    isAuthed: true\n                  }\n                  return currentUser\n                })\n                .catch((error) => {\n                  let currentUser = {\n                    isAuthed: false\n                  }\n                  $state.go('home')\n                  return currentUser\n                });\n          }\n        }\n      });\n\n    $urlRouterProvider.otherwise('/home');\n  }\n\n})();","(function() {\n  angular\n    .module('app')\n    .controller('HomeController', HomeController)\n\n  function HomeController($scope, user) {\n\n    // Auth\n    console.log(\"user object returned\", user)\n    $scope.userName = user.userName;\n    $scope.isAuthed = user.isAuthed;\n\n    // Parallax scroll effects\n    $(window).on('scroll', function() {\n      var winScroll = $(this).scrollTop();\n\n      $('.helix').css({\n        'transform': 'translateY(-' + winScroll / 15 + '%)'\n      });\n      $('.helix-marks').css({\n        'transform': 'translate(-' + winScroll / 7 + '%, -' + winScroll / 15 + '%)'\n      });\n      $('.circles-side').css({\n        'transform': 'translateY(-' + winScroll / 15 + '%)'\n      });\n      $('.guanine').css({\n        'transform': 'translateX(-' + winScroll / 15 + '%)'\n      });\n      $('.cytosine').css({\n        'transform': 'translateX(+' + winScroll / 12 + '%)'\n      });\n    });\n\n  } // END OF CTRL FUNC\n})(); // END OF IIFE","(function() {\n\n  angular\n    .module('app')\n    .controller('MenuController', MenuController)\n\n  function MenuController($scope, $state, AuthService) {\n\n    // Set initial display variables\n    $scope.loggedIn = ($scope.loggedIn === true) ? true : false;\n\n    function getUser() {\n\n      AuthService.getUser()\n        .then((res) => {\n            $scope.userName = res.username;\n            $scope.isAuthed = true;\n          })\n          .catch((err) => {\n            $scope.isAuthed = false;\n          });\n    }\n\n    getUser();\n\n    $(window).scroll(function() {\n      var sticky = $('.sticky'),\n        scroll = $(window).scrollTop();\n      if (scroll >= 80) sticky.addClass('fixed');\n      else sticky.removeClass('fixed');\n    });\n\n  } // END OF CTRL FUNC\n})(); // END OF IIFE","(function() {\n\n  angular\n    .module('app')\n    .controller('StartController', StartController)\n\n  function StartController($scope, $state, UploadService, user) {\n\n    $scope.username = user.userName;\n\n    $scope.uploadGenomeTXT = function(TXT) {\n        $scope.showUpload = true;\n        if (TXT) {\n          \n          UploadService.sendGenomeTXT(TXT).then((response) => {\n            console.log(response);\n            $state.go('summary');\n          }, (err) => console.log(err))\n        }\n      }\n    \n  } // END OF CONTROLLER FUNCTION\n\n})(); // END OF IIFE","(function () {\n  angular\n   .module('app')\n   .controller('SummaryController', SummaryController)\n\n  function SummaryController($scope, $state, user, ResultsService) {\n\n    $scope.userName = user.userName;\n    $scope.userId = user.userId;\n\n    let getGenomeResults = (userId) => {\n      console.log('FIRED')\n      ResultsService.getResultsByUserId(userId)\n        .then((response) => {\n          console.log(response)\n          return ResultsService.cleanseGenotypeResults(response);\n        })\n        .then((response) => {\n          console.log(response)\n          return response////////////////////\n        })\n        .catch((err) => console.log(err))\n    }\n\n    getGenomeResults($scope.userId)\n      .then((response) => {\n        console.log(response)\n      })\n      .catch((err) => {\n        console.log(err)\n      })\n\n  } // END OF CTRL FUNC\n})(); // END OF IIFE","(function() {\n  'use strict';\n\n  angular\n    .module('app')\n    .directive('onReadFile', onReadFile);\n\n\n  function onReadFile($parse) {\n\n    return {\n      restrict: 'A',\n      scope: false,\n      link: function(scope, element, attrs) {\n        var fn = $parse(attrs.onReadFile);\n        element.on('change', function(onChangeEvent) {\n          var reader = new FileReader();\n          reader.onload = function(onLoadEvent) {\n            scope.$apply(function() {\n              fn(scope, {\n                $fileContent: onLoadEvent.target.result\n              });\n            });\n          };\n          reader.readAsText((onChangeEvent.srcElement || onChangeEvent.target).files[0]);\n        });\n      }\n    };\n\n  };\n})();","(function() {\n  angular\n    .module('app')\n    .service('AuthService', AuthService)\n\n  function AuthService($http) {\n\n  this.getUser = () => {\n      return $http({\n          method: 'GET',\n          url: '/api/auth/user'\n        })\n        .then((response) => {\n          return response.data[0];\n        })\n        .catch((err) => {\n          throw new Error(err);\n        })\n    };\n\n  }\n\n})();","(function() {\n  angular\n    .module('app')\n    .service('ResultsService', ResultsService)\n\n  function ResultsService($http) {\n\n    this.getResultsByUserId = (userId) => {\n      console.log(\"service userId\", userId)\n      return $http({\n        method: 'GET',\n        url: `/api/results/${userId}`,\n      })\n      .then((response) => {\n        console.log(response)\n        return response.data;\n      })\n      .catch((err) => {\n        console.log(err);\n        throw new Error(err);\n      })\n    }\n\n    this.cleanseGenotypeResults = (genotypeResultsObject) => {\n      return genotypeResultsObject ////////////////\n    }\n\n  }; // END OF SVC FUNC\n})(); // END OF IIFE","(function() {\n  angular\n    .module('app')\n    .service('UploadService', UploadService)\n\n  function UploadService($http, $q) {\n\n    this.sendGenomeTXT = (uploadTXT) => {\n      var deferred = $q.defer();    \n      $http({    \n            method: 'POST',\n            url: '/api/upload',\n            data: {file: uploadTXT}\n      }).then(function(res) {      \n        deferred.resolve(res.data);    \n      }).catch(function(res) {      \n        deferred.reject(res);    \n      });    \n      return deferred.promise;\n    }\n\n  } //END OF SVC FUNC\n\n})(); //END OF IIFE"]}