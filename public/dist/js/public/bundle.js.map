{"version":3,"sources":["app.js","directives/fileUpload.js","services/auth.service.js","services/upload.service.js","controllers/homeController.js","controllers/menuController.js","controllers/startController.js","controllers/summaryController.js"],"names":["angular","module","config","$inject","$stateProvider","$urlRouterProvider","state","url","controller","templateUrl","resolve","user","authService","$state","userObj","getUser","then","response","console","log","isAuthed","userId","userid","userName","username","catch","err","go","$rootScope","otherwise","directive","$parse","restrict","scope","link","element","attrs","fn","onReadFile","on","onChangeEvent","reader","FileReader","onload","onLoadEvent","$apply","$fileContent","target","result","readAsText","srcElement","files","service","$http","method","res","data","uploadService","$q","sendGenomeTXT","uploadTXT","deferred","defer","file","reject","promise","homeController","$scope","$","window","winScroll","scrollTop","css","menuController","loggedIn","scroll","sticky","addClass","removeClass","startController","uploadGenomeTXT","TXT","showUpload","summaryController"],"mappings":"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","file":"../bundle.js","sourcesContent":["(function() {\n\n  'use strict';\n\n  angular\n    .module('app', ['ui.router'])\n    .config(config);\n\n  config.$inject = ['$stateProvider', '$urlRouterProvider'];\n\n  function config($stateProvider, $urlRouterProvider) {\n\n    $stateProvider\n      .state('home', {\n        url: '/home',\n        controller: 'homeController',\n        templateUrl: './../views/home.html',\n        resolve: {\n          user: (authService, $state) => {\n            let userObj = {}\n\n            return authService.getUser()\n              .then((response) => {\n                if (!response) {\n                  console.log('no response in .state resolve');\n                  userObj.isAuthed = false;\n                } else {\n                  userObj.userId = response.userid,\n                  userObj.userName = response.username,\n                  userObj.isAuthed = true;\n                }\n                return userObj;\n              })\n              .catch((err) => {\n                console.log('catch err in .state resolve', err);\n                userObj.isAuthed = false;\n                return userObj;\n              })\n          }\n        }\n      })\n      .state('start', {\n        url: '/start',\n        controller: 'startController',\n        templateUrl: './../views/start.html',\n        resolve: {\n          user: (authService, $state) => {\n            let userObj = {}\n\n            return authService.getUser()\n              .then((response) => {\n                if (!response) {\n                  console.log('no response in .state resolve');\n                  userObj.isAuthed = false\n                  $state.go('home');\n                } else {\n                  userObj.userId = response.userid,\n                  userObj.userName = response.username,\n                  userObj.isAuthed = true;\n                }\n                return userObj;\n              })\n              .catch((err) => {\n                console.log('catch err in .state resolve', err);\n                $state.go('home')\n              })\n          }\n        }\n      })\n      .state('summary', {\n        url: '/summary',\n        controller: 'summaryController',\n        templateUrl: './../views/summary.html',\n        resolve: {\n          user: (authService, $state, $rootScope) => {\n            let userObj = {}\n\n            return authService.getUser()\n              .then((response) => {\n                if (!response) {\n                  console.log('no response in .state resolve');\n                  userObj.isAuthed = false\n                  $state.go('home');\n                } else {\n                  userObj.userId = response.userid,\n                  userObj.userName = response.username,\n                  userObj.isAuthed = true;\n                }\n                return userObj;\n              })\n              .catch((err) => {\n                console.log('catch err in .state resolve', err);\n                $state.go('home')\n              })\n          }\n        }\n      });\n\n    $urlRouterProvider.otherwise('/home');\n  }\n\n})();","(function() {\n  'use strict';\n\n  angular\n    .module('app')\n    .directive('onReadFile', function($parse) {\n\n      return {\n        restrict: 'A',\n        scope: false,\n        link: function(scope, element, attrs) {\n          var fn = $parse(attrs.onReadFile);\n          element.on('change', function(onChangeEvent) {\n            var reader = new FileReader();\n            reader.onload = function(onLoadEvent) {\n              scope.$apply(function() {\n                fn(scope, {\n                  $fileContent: onLoadEvent.target.result\n                });\n              });\n            };\n            reader.readAsText((onChangeEvent.srcElement || onChangeEvent.target).files[0]);\n          });\n        }\n      };\n      \n    });\n})();","(function() {\n  angular\n    .module('app')\n    .service('authService', authService)\n\n  function authService($http) {\n\n  this.getUser = function() {\n      return $http({\n          method: 'GET',\n          url: '/api/auth/user'\n        })\n        .then(function(res) {\n          console.log(res.data[0])\n          return res.data[0];\n        });\n    };\n\n  }\n\n})();","(function() {\n  angular\n    .module('app')\n    .service('uploadService', uploadService)\n\n  function uploadService($http, $q) {\n\n    this.sendGenomeTXT = (uploadTXT) => {\n      var deferred = $q.defer();    \n      $http({    \n            method: 'POST',\n            url: '/api/upload',\n            data: {file: uploadTXT}\n      }).then(function(res) {      \n        deferred.resolve(res.data);    \n      }).catch(function(res) {      \n        deferred.reject(res);    \n      });    \n      return deferred.promise;\n    }\n\n  } //END OF SVC FUNC\n\n})(); //END OF IIFE","(function() {\n  angular\n    .module('app')\n    .controller('homeController', homeController)\n\n  function homeController($scope, user) {\n\n    // Auth\n    $scope.userName = user.userName;\n    $scope.isAuthed = user.isAuthed;\n\n    console.log($scope.isAuthed);\n\n    // Parallax scroll effects\n    $(window).on('scroll', function() {\n      var winScroll = $(this).scrollTop();\n\n      $('.helix').css({\n        'transform': 'translateY(-' + winScroll / 15 + '%)'\n      });\n      $('.helix-marks').css({\n        'transform': 'translate(-' + winScroll / 7 + '%, -' + winScroll / 15 + '%)'\n      });\n      $('.circles-side').css({\n        'transform': 'translateY(-' + winScroll / 15 + '%)'\n      });\n      $('.guanine').css({\n        'transform': 'translateX(-' + winScroll / 15 + '%)'\n      });\n      $('.cytosine').css({\n        'transform': 'translateX(+' + winScroll / 12 + '%)'\n      });\n    });\n\n  } // END OF CTRL FUNC\n\n})(); // END OF IIFE","(function() {\n\n  angular\n    .module('app')\n    .controller('menuController', menuController)\n\n  function menuController($scope, $state, authService) {\n\n    // Set initial display variables\n    $scope.loggedIn = ($scope.loggedIn === true) ? true : false;\n\n    function getUser() {\n\n      authService.getUser()\n        .then((res) => {\n            $scope.username = res.username;\n            $scope.loggedIn = true;\n            console.log(\"menuController\", $scope.username, $scope.loggedIn)\n          },\n          (err) => {\n            $scope.username = null;\n            $scope.loggedIn = false;\n            console.log(\"menuController\", $scope.username, $scope.loggedIn)\n          });\n    }\n\n    getUser();\n\n    $(window).scroll(function() {\n      var sticky = $('.sticky'),\n        scroll = $(window).scrollTop();\n      if (scroll >= 80) sticky.addClass('fixed');\n      else sticky.removeClass('fixed');\n    });\n\n  } // END OF CTRL FUNC\n})(); // END OF IIFE","(function() {\n\n  angular\n    .module('app')\n    .controller('startController', startController)\n\n  function startController($scope, $state, authService, uploadService, user) {\n\n    $scope.username = user.userName;\n\n    $scope.uploadGenomeTXT = function(TXT) {\n        $scope.showUpload = true;\n        if (TXT) {\n          \n          uploadService.sendGenomeTXT(TXT).then((response) => {\n            console.log(response);\n            $state.go('summary');\n          }, (err) => console.log(err))\n        }\n      }\n      /******************** submitForm ********************/\n    \n  } // END OF CONTROLLER FUNCTION\n\n})(); // END OF IIFE","(function () {\n  angular\n   .module('app')\n   .controller('summaryController', summaryController);\n\n  function summaryController($scope, $state, authService, user) {\n\n    $scope.username = user.userName;\n    $scope.userid = user.userId;\n\n  } // END OF CTRL FUNC\n  \n})(); // END OF IIFE"]}