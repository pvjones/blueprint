{"version":3,"sources":["app.js","controllers/homeController.js","controllers/menuController.js","controllers/startController.js","directives/fileUpload.js","services/auth.service.js","services/upload.service.js"],"names":["angular","module","config","$inject","$stateProvider","$urlRouterProvider","state","url","controller","templateUrl","resolve","user","authService","$state","getUser","then","response","console","log","go","catch","err","otherwise","$scope","$","window","on","winScroll","scrollTop","css","scroll","sticky","addClass","removeClass","menuController","res","username","loggedIn","startController","uploadService","uploadGenomeTXT","TXT","loadingMessage","sendGenomeTXT","app","directive","$parse","restrict","scope","link","element","attrs","fn","onReadFile","onChangeEvent","reader","FileReader","onload","onLoadEvent","$apply","$fileContent","target","result","readAsText","srcElement","files","service","$http","method","data","$q","uploadTXT","deferred","defer","file","reject","promise"],"mappings":"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","file":"../bundle.js","sourcesContent":["(function() {\n\n  'use strict';\n\n  angular\n    .module('app', ['ui.router'])\n    .config(config);\n\n  config.$inject = ['$stateProvider', '$urlRouterProvider'];\n\n  function config($stateProvider, $urlRouterProvider) {\n\n    $stateProvider\n      .state('home', {\n        url: '/home',\n        controller: 'homeController',\n        templateUrl: './../views/home.html'\n      })\n      .state('start', {\n        url: '/start',\n        controller: 'startController',\n        templateUrl: './../views/start.html',\n        resolve: {\n          user: function(authService, $state) {\n            return authService.getUser()\n              .then(function(response) {\n                if (!response) {\n                  console.log('no response in .state resolve');\n                  $state.go('home');\n                }\n                return response;\n              })\n              .catch(function(err) {\n                console.log('catch err in .state resolve', err);\n                $state.go('home');\n              });\n          }\n        }\n      });\n\n    $urlRouterProvider.otherwise('/home');\n  }\n\n})();","angular.module('app').controller('homeController', function($scope) {\n\n  $(window).on('scroll', function() {\n    var winScroll = $(this).scrollTop();\n\n    $('.helix').css({\n      'transform': 'translateY(-' + winScroll / 15 + '%)'\n    });\n    $('.helix-marks').css({\n      'transform': 'translate(-' + winScroll / 7 + '%, -' + winScroll / 15 + '%)'\n    });\n    $('.circles-side').css({\n      'transform': 'translateY(-' + winScroll / 15 + '%)'\n    });\n    $('.guanine').css({\n      'transform': 'translateX(-' + winScroll / 15 + '%)'\n    });\n    $('.cytosine').css({\n      'transform': 'translateX(+' + winScroll / 12 + '%)'\n    });\n  });\n\n  $(window).scroll(function() {\n    var sticky = $('.sticky'),\n      scroll = $(window).scrollTop();\n    if (scroll >= 80) sticky.addClass('fixed');\n    else sticky.removeClass('fixed');\n  });\n\n});","(function() {\n\n  angular\n    .module('app')\n    .controller('menuController', menuController)\n\n  function menuController($scope, $state, authService) {\n\n    function getUser() {\n\n      authService.getUser()\n        .then((res) => {\n          $scope.username = res.username;\n          $scope.loggedIn = true;\n          console.log(\"menuController\", $scope.username, $scope.loggedIn)\n        },\n        (err) => {\n          $scope.username = null;\n          $scope.loggedIn = false;\n          console.log(\"menuController\", $scope.username, $scope.loggedIn)\n        });\n    }\n\n    getUser();\n\n\n\n  }\n})();","(function() {\n\n  angular\n    .module('app')\n    .controller('startController', startController)\n\n  function startController($scope, authService, uploadService) {\n\n    function getUser() {\n      authService.getUser()\n        .then(function(res) {\n          $scope.username = res.username;\n        });\n    }\n\n    getUser();\n\n    $scope.uploadGenomeTXT = function(TXT) {\n      console.log(\"uploadGenomeTXT fired\");\n      if (TXT) {\n        console.log(\"TXT is truthy\")\n        $scope.loadingMessage = \"Uploading and converting your genotyping results\";\n        uploadService.sendGenomeTXT(TXT)\n      }\n    }\n  }\n\n})();","(function(){\n  'use strict';\n\nvar app = angular.module('app');\n\n  app.directive('onReadFile', function($parse){\n    return {\n        restrict: 'A',\n        scope: false,\n        link: function(scope, element, attrs) {\n            var fn = $parse(attrs.onReadFile);  \n            element.on('change', function(onChangeEvent) {\n              var reader = new FileReader();           \n              reader.onload = function(onLoadEvent) {\n              scope.$apply(function() {\n              fn(scope, {$fileContent:onLoadEvent.target.result});\n              });\n            };\n            reader.readAsText((onChangeEvent.srcElement || onChangeEvent.target).files[0]);\n          });\n        }\n      };\n  });\n})(); ","(function() {\n  angular\n    .module('app')\n    .service('authService', authService)\n\n  function authService($http) {\n\n  this.getUser = function() {\n      return $http({\n          method: 'GET',\n          url: '/api/auth/user'\n        })\n        .then(function(res) {\n          console.log(res.data[0])\n          return res.data[0];\n        });\n    };\n\n  }\n\n})();","(function() {\n  angular\n    .module('app')\n    .service('uploadService', uploadService)\n\n  function uploadService($http, $q) {\n\n    this.sendGenomeTXT = function(uploadTXT) {\n      var deferred = $q.defer();    \n      $http({    \n            method: 'POST',\n            url: '/api/upload',\n            data: {file: uploadTXT}\n      }).then(function(res) {      \n        deferred.resolve(res.data);    \n      }).catch(function(res) {      \n        deferred.reject(res);    \n      });    \n      return deferred.promise;\n    }\n  }\n\n})();"]}