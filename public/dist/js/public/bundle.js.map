{"version":3,"sources":["app.js","directives/fileUpload.js","controllers/homeController.js","controllers/menuController.js","controllers/startController.js","controllers/summaryController.js","services/auth.service.js","services/upload.service.js"],"names":["angular","module","config","$inject","$stateProvider","$urlRouterProvider","state","url","controller","templateUrl","resolve","user","authService","$state","userObj","getUser","then","response","console","log","isAuthed","userId","userid","userName","username","catch","err","go","$rootScope","otherwise","app","directive","$parse","restrict","scope","link","element","attrs","fn","onReadFile","on","onChangeEvent","reader","FileReader","onload","onLoadEvent","$apply","$fileContent","target","result","readAsText","srcElement","files","$scope","$","window","winScroll","scrollTop","css","menuController","loggedIn","res","scroll","sticky","addClass","removeClass","startController","uploadService","uploadGenomeTXT","TXT","loadingMessage","sendGenomeTXT","summaryController","service","$http","method","data","$q","uploadTXT","deferred","defer","file","reject","promise"],"mappings":"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","file":"../bundle.js","sourcesContent":["(function() {\n\n  'use strict';\n\n  angular\n    .module('app', ['ui.router'])\n    .config(config);\n\n  config.$inject = ['$stateProvider', '$urlRouterProvider'];\n\n  function config($stateProvider, $urlRouterProvider) {\n\n    $stateProvider\n      .state('home', {\n        url: '/home',\n        controller: 'homeController',\n        templateUrl: './../views/home.html',\n        resolve: {\n          user: (authService, $state) => {\n            let userObj = {}\n\n            return authService.getUser()\n              .then((response) => {\n                if (!response) {\n                  console.log('no response in .state resolve');\n                  userObj.isAuthed = false;\n                } else {\n                  userObj.userId = response.userid,\n                  userObj.userName = response.username,\n                  userObj.isAuthed = true;\n                }\n                return userObj;\n              })\n              .catch((err) => {\n                console.log('catch err in .state resolve', err);\n                userObj.isAuthed = false;\n                return userObj;\n              })\n          }\n        }\n      })\n      .state('start', {\n        url: '/start',\n        controller: 'startController',\n        templateUrl: './../views/start.html',\n        resolve: {\n          user: (authService, $state) => {\n            let userObj = {}\n\n            return authService.getUser()\n              .then((response) => {\n                if (!response) {\n                  console.log('no response in .state resolve');\n                  userObj.isAuthed = false\n                  $state.go('home');\n                } else {\n                  userObj.userId = response.userid,\n                  userObj.userName = response.username,\n                  userObj.isAuthed = true;\n                }\n                return userObj;\n              })\n              .catch((err) => {\n                console.log('catch err in .state resolve', err);\n                $state.go('home')\n              })\n          }\n        }\n      })\n      .state('summary', {\n        url: '/summary',\n        controller: 'summaryController',\n        templateUrl: './../views/summary.html',\n        resolve: {\n          user: (authService, $state, $rootScope) => {\n            let userObj = {}\n\n            return authService.getUser()\n              .then((response) => {\n                if (!response) {\n                  console.log('no response in .state resolve');\n                  userObj.isAuthed = false\n                  $state.go('home');\n                } else {\n                  userObj.userId = response.userid,\n                  userObj.userName = response.username,\n                  userObj.isAuthed = true;\n                }\n                return userObj;\n              })\n              .catch((err) => {\n                console.log('catch err in .state resolve', err);\n                $state.go('home')\n              })\n          }\n        }\n      });\n\n    $urlRouterProvider.otherwise('/home');\n  }\n\n})();","(function(){\n  'use strict';\n\nvar app = angular.module('app');\n\n  app.directive('onReadFile', function($parse){\n    return {\n        restrict: 'A',\n        scope: false,\n        link: function(scope, element, attrs) {\n            var fn = $parse(attrs.onReadFile);  \n            element.on('change', function(onChangeEvent) {\n              var reader = new FileReader();           \n              reader.onload = function(onLoadEvent) {\n              scope.$apply(function() {\n              fn(scope, {$fileContent:onLoadEvent.target.result});\n              });\n            };\n            reader.readAsText((onChangeEvent.srcElement || onChangeEvent.target).files[0]);\n          });\n        }\n      };\n  });\n})(); ","angular.module('app').controller('homeController', function($scope, user) {\n\n  // Auth\n  $scope.userName = user.userName;\n  $scope.isAuthed = user.isAuthed;\n\n  console.log($scope.isAuthed);\n\n  // Parallax scroll effects\n  $(window).on('scroll', function() {\n    var winScroll = $(this).scrollTop();\n\n    $('.helix').css({\n      'transform': 'translateY(-' + winScroll / 15 + '%)'\n    });\n    $('.helix-marks').css({\n      'transform': 'translate(-' + winScroll / 7 + '%, -' + winScroll / 15 + '%)'\n    });\n    $('.circles-side').css({\n      'transform': 'translateY(-' + winScroll / 15 + '%)'\n    });\n    $('.guanine').css({\n      'transform': 'translateX(-' + winScroll / 15 + '%)'\n    });\n    $('.cytosine').css({\n      'transform': 'translateX(+' + winScroll / 12 + '%)'\n    });\n  });\n\n\n\n});","(function() {\n\n  angular\n    .module('app')\n    .controller('menuController', menuController)\n\n  function menuController($scope, $state, authService) {\n\n    // Set initial display variables\n    $scope.loggedIn = ($scope.loggedIn === true) ? true : false;\n\n    function getUser() {\n\n      authService.getUser()\n        .then((res) => {\n            $scope.username = res.username;\n            $scope.loggedIn = true;\n            console.log(\"menuController\", $scope.username, $scope.loggedIn)\n          },\n          (err) => {\n            $scope.username = null;\n            $scope.loggedIn = false;\n            console.log(\"menuController\", $scope.username, $scope.loggedIn)\n          });\n    }\n\n    getUser();\n\n    $(window).scroll(function() {\n      var sticky = $('.sticky'),\n        scroll = $(window).scrollTop();\n      if (scroll >= 80) sticky.addClass('fixed');\n      else sticky.removeClass('fixed');\n    });\n\n  } // END OF CTRL FUNC\n})(); // END OF IIFE","(function() {\n\n  angular\n    .module('app')\n    .controller('startController', startController)\n\n  function startController($scope, $state, authService, uploadService, user) {\n\n    $scope.username = user.userName;\n\n    $scope.uploadGenomeTXT = function(TXT) {\n      console.log(\"uploadGenomeTXT fired\");\n      if (TXT) {\n        $scope.loadingMessage = \"Uploading and converting your genotyping results\";\n        uploadService.sendGenomeTXT(TXT).then((response) => {\n          console.log(response);\n          $state.go('summary');\n        }, (err) => console.log(err))\n      }\n    }\n  \n  } // END OF CONTROLLER FUNCTION\n\n})(); // END OF IIFE\n\n","(function () {\n  angular\n   .module('app')\n   .controller('summaryController', summaryController);\n\n  function summaryController($scope, $state, authService, user) {\n\n    $scope.username = user.userName;\n    $scope.userid = user.userId;\n\n  } // END OF CTRL FUNC\n  \n})(); // END OF IIFE","(function() {\n  angular\n    .module('app')\n    .service('authService', authService)\n\n  function authService($http) {\n\n  this.getUser = function() {\n      return $http({\n          method: 'GET',\n          url: '/api/auth/user'\n        })\n        .then(function(res) {\n          console.log(res.data[0])\n          return res.data[0];\n        });\n    };\n\n  }\n\n})();","(function() {\n  angular\n    .module('app')\n    .service('uploadService', uploadService)\n\n  function uploadService($http, $q) {\n\n    this.sendGenomeTXT = (uploadTXT) => {\n      var deferred = $q.defer();    \n      $http({    \n            method: 'POST',\n            url: '/api/upload',\n            data: {file: uploadTXT}\n      }).then(function(res) {      \n        deferred.resolve(res.data);    \n      }).catch(function(res) {      \n        deferred.reject(res);    \n      });    \n      return deferred.promise;\n    }\n\n  } //END OF SVC FUNC\n\n})(); //END OF IIFE"]}